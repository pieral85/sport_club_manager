<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
    <!-- tree view(s) -->
    <record id="interclub_view_list" model="ir.ui.view">
        <field name="name">interclub list</field>
        <field name="model">interclub</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="kind"/>
                <field name="season_id"/>
                <field name="responsible_id"/>
            </tree>
        </field>
    </record>

    <!-- form view(s) -->
    <record id="interclub_view_form" model="ir.ui.view">
        <field name="name">interclub form</field>
        <field name="model">interclub</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="kind"/>
                            <field name="season_id"/>
                        </group>
                        <group>
                            <field name="responsible_id"/>
                            <field name="referee_ids" widget="many2many_tags"/>
                            <field name="location_id"/>
                        </group>
                        <group colspan="4">
                            <field name="player_ids" widget="many2many_tags"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Events">
                            <field name="event_ids" context="{'default_partner_ids': player_ids}">
                                <tree editable="bottom">
                                    <field name="opponent_id"/>
                                    <field name="at_home"/>
                                    <field name="referee_id"
        domain="[('id', 'in', parent.referee_ids)]"
                                options="{'no_create': True}"/>
                                    <field name="start"/>
                                    <field name="stop" invisible="1"/>
                                    <!-- <field name="partner_ids" widget="many2manyattendee"/> NOT WORKING-->
                                    <field name="partner_ids" widget="many2many_tags"
        domain="[('id', 'in', parent.player_ids)]"
            options="{'no_create': True}"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Options">
                            <group>
                                <field name="event_items_color" widget="color" options="{'readonly_mode': 'color'}"/>
                            </group>
                        </page>
                    </notebook>

                </sheet>
                <!-- <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div> -->
            </form>
        </field>
    </record>

    <!-- search view(s) -->
    <record id="interclub_search" model="ir.ui.view">
        <field name="name">interclub.search</field>
        <field name="model">interclub</field>
        <field name="arch" type="xml">
            <search string="Periods">
                <field name="season_id" string="Season" filter_domain="[('season_id', 'ilike', self)]"/>
                <field name="kind" string="Kind" filter_domain="[('kind', 'ilike', self)]"/>
                <filter name ="my_interclubs_search" string="My Interclubs" domain="['|', '|', ('player_ids.user_ids', 'in', [uid]), ('referee_ids.user_ids', 'in', [uid]), ('responsible_id.user_ids', 'in', [uid])]" help="Interclubs for which I am a player, referee or responsible."/>
                <separator/>
                <filter name ="current_season_search" string="Current Season" domain="[('season_id.current', '=', True)]" help="Interclubs of current season."/>
                <filter name ="upcoming_season_search" string="Upcoming Season" domain="[('season_id.upcoming', '=', True)]" help="Interclubs of upcoming period."/>
            </search>
        </field>
    </record>

</data>
</odoo>
